import"./modulepreload-polyfill-3cfb730f.js";import{p as I}from"./p5.min-0594c91b.js";import"./_commonjsHelpers-042e6b4d.js";import"./_commonjs-dynamic-modules-302442b1.js";let E,T=0,V=0,X=0;const Y=[0,.1,.2,.3,.4,.5,.7],G=e=>{let o,d,n,c,f,y,r,l,R=0,x=0,u=!1,g=!1,m=!1,k=0;const L=1,S=4,q=25,b=.9;let A=0,W=0,v=0,C=0;e.setup=()=>{e.createCanvas(e.windowWidth,e.windowHeight),l=e.createVector(0,0),r=e.createVector(0,0),d=e.createVector(0,0),o=e.createVector(e.windowWidth/2,e.windowHeight/2),n=e.createVector(o.x-20,o.y),c=e.createVector(o.x+20,o.y),f=e.createVector(o.x-20,o.y),y=e.createVector(o.x+20,o.y),e.imageMode(e.CENTER),e.background(116,89,97);const i=new z(e.windowWidth/2-250,e.windowHeight/2,100,Y,.1,.1),t=new z(e.windowWidth/2+250,e.windowHeight/2,100,Y,.5,.1);E=[i,t]},e.draw=()=>{e.background(255,255,255,255),e.stroke(0),e.fill(255),g?(e.ellipse(e.mouseX,e.mouseY,40,40),_()):u&&(e.ellipse(d.x,d.y,40,40),_(d.x,d.y)),N(),F(),R=x,k>q&&(k=0,m=!m),k++,e.noStroke(),E.forEach(i=>{i.draw()}),V+=.005};function F(){const i=x-R;c.add(r),n.add(r),n=H(n,o,i),c=H(c,o,i),m?m&&(y=I.Vector.lerp(y,c,.1)):f=I.Vector.lerp(f,n,.1),e.ellipse(f.x,f.y,10,10),e.ellipse(y.x,y.y,10,10)}function N(){r.add(l.mult(L)),r.limit(S);const i=r.magSq();i>0&&(i.toFixed(2)>0?(l.x===0&&(r.x*=b),l.y===0&&(r.y*=b),x=r.heading()+e.HALF_PI):(r.mult(0),x=R)),o.add(r)}function O(){u=!1,l.mult(0),l.y+=-1*A,l.y+=1*W,l.x+=-1*v,l.x+=1*C,l.normalize()}function _(i=e.mouseX,t=e.mouseY){const s=e.createVector(0,0);s.x=i-o.x,s.y=t-o.y,s.magSq()>15?l=s.normalize():(r.mult(b**2),l.mult(0),u=!1)}e.keyPressed=()=>{(e.keyCode===e.LEFT_ARROW||e.key==="a")&&(v=1),(e.keyCode===e.RIGHT_ARROW||e.key==="d")&&(C=1),(e.keyCode===e.UP_ARROW||e.key==="w")&&(A=1),(e.keyCode===e.DOWN_ARROW||e.key==="s")&&(W=1),O()},e.keyReleased=()=>{(e.keyCode===e.LEFT_ARROW||e.key==="a")&&(v=0),(e.keyCode===e.RIGHT_ARROW||e.key==="d")&&(C=0),(e.keyCode===e.UP_ARROW||e.key==="w")&&(A=0),(e.keyCode===e.DOWN_ARROW||e.key==="s")&&(W=0),O()},e.mousePressed=()=>{g=!0,u=!1},e.mouseReleased=()=>{g=!1,u=!0,d.x=e.mouseX,d.y=e.mouseY,l.x=0,l.y=0},e.windowResized=()=>{e.resizeCanvas(e.windowWidth,e.windowHeight)};function H(i,t,s){const h=e.sin(s),a=e.cos(s);i.sub(t);const w=i.x*a-i.y*h,P=i.x*h+i.y*a;return i.x=w+t.x,i.y=P+t.y,i}class z{constructor(t,s,h,a){this.x=t,this.y=s,this.size=h,this.flexibilityArray=a,this.slices=[],this.treeId=T,this.setup()}setup(){for(let t=0;t<this.flexibilityArray.length;t++)this.slices.push(new B(this.x,this.y,this.size,t,this.flexibilityArray[t],this.treeId));T+=1}draw(){V+=1e-4,this.slices.forEach(t=>{t.draw(this.windX,this.windY)})}}class B{constructor(t,s,h,a,w,P){this.x=t,this.y=s,this.radius=h-a*6,this.level=a+2,this.flexibility=w,this.branches=[],this.leaves=[],this.treeId=P,this.setup()}setup(){(()=>{for(let s=0;s<this.level;s++)this.branches.push([this.x+e.random(-this.radius,this.radius)*.15*this.level,this.y+e.random(-this.radius,this.radius)*.15*this.level])})();for(let s=0;s<this.branches.length;s++)this.leaves.push(new D(this.branches[s][0],this.branches[s][1],this.radius+30/this.level,this.level,this.flexibility))}draw(){X=this.level*.02,this.leaves.forEach((t,s)=>{const h=e.map(e.noise(X+s,V+this.treeId),0,1,-e.PI/3,e.PI/3);t.update(h*60,-h*60),t.draw()})}}class D{constructor(t,s,h,a,w){this.x=t+e.random(5,10),this.y=s+e.random(5,10),this.radius=h,this.level=a,this.flexibility=w,this.offsetX=0,this.offsetY=0}draw(){e.fill(0,100+this.level*20,0,220),e.circle(this.x+this.offsetX,this.y+this.offsetY+e.random(0,1),this.radius)}update(t,s){this.offsetX=t*this.flexibility,this.offsetY=s*this.flexibility}}};new I(G);
