{"ast":null,"code":"import _slicedToArray from\"/Users/floris.veldhuizen/Documents/GitHub/florisveldhuizen.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/Users/floris.veldhuizen/Documents/GitHub/florisveldhuizen.github.io/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{useEffect}from\"react\";import{ReactP5Wrapper}from\"react-p5-wrapper\";import{Helmet}from\"react-helmet-async\";import{cleanupFavicon,P5Wrapper}from\"./helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var sketch=function sketch(p5){/*\n  Made by: Floris Veldhuizen\n  Queuing of moves was adapted from: https://github.com/patorjk/JavaScript-Snake/blob/master/js/snake.js\n  */ // PARAMS\nvar fieldWidth=400;var fieldHeight=400;var gridResX=14;// How many squares fit in a row  (default: 14)\nvar gameSpeed=13;// Amount of frames per second    (default: 12)\nvar snakeSize=5;// GLOBAL VARIABLES\nvar NIL=-1;var _RIGHT=0;var _DOWN=1;var _LEFT=2;var _UP=3;// PRECALCULATED VALUES\nvar fieldOffsetX,fieldOffsetY,squareSize,gridResY,maxLength,lastDir;// TOUCH CONTROLS\nvar startTouchX,startTouchY;var touchControl=false;// If true, the touch controls are displayed on screen\nvar touchDir=NIL;var arcSize=120;// Diameter of the touch controls\nvar isFirstMove=true;var preMove=NIL;var curDir=_RIGHT;var curLoc=[0,0];var bodyParts=[];var bodyLength=snakeSize-1;var death=false;var iterationCounter=0;var snaccPos=[0,0];var _frameRate=Math.floor(60/gameSpeed);// Assuming 60 fps\nvar highScore=0;p5.setup=function(){p5.frameRate(60);p5.createCanvas(p5.windowWidth,p5.windowHeight);p5.background(0,0,0,100);fieldOffsetX=p5.windowWidth/2-fieldWidth/2;fieldOffsetY=p5.windowHeight/2-fieldHeight/2;squareSize=fieldWidth/gridResX;gridResY=Math.floor(fieldHeight/squareSize);maxLength=gridResX*gridResY;spawnSnacc();};p5.draw=function(){if(touchControl)calcTouch();if(iterationCounter>_frameRate){p5.background(0,0,0,100);calcNewPos();drawGrid();drawPlayer();drawSnacc();iterationCounter=0;}if(touchControl)drawTouch();if(death)reset();iterationCounter++;drawScore();};var reset=function reset(){p5.fill(255);p5.rect(0,0,p5.windowWidth,p5.windowHeight);p5.background(0,0,0,100);bodyLength=snakeSize-1;bodyParts=[];death=false;};var drawGrid=function drawGrid(){p5.stroke(255);p5.fill(0);for(var i=0;i<gridResX;i++){// x-axis\nfor(var j=0;j<gridResY;j++){// y-axis\np5.rect(i*squareSize+fieldOffsetX,j*squareSize+fieldOffsetY,squareSize,squareSize);}}};var drawScore=function drawScore(){var fontSize=30;var curScore=bodyLength-(snakeSize-1);if(curScore>highScore)highScore=curScore;p5.textSize(fontSize);p5.fill(255);// Highscore\np5.textAlign(p5.RIGHT);p5.text(\"\".concat(String.fromCodePoint(0x1F3C6),\": \").concat(highScore),fieldOffsetX+fieldWidth,fieldOffsetY-fontSize);// Current score\np5.textAlign(p5.LEFT);p5.text(\"\".concat(String.fromCodePoint(0x1F36C),\": \").concat(curScore),fieldOffsetX,fieldOffsetY-fontSize);};var spawnSnacc=function spawnSnacc(){// TO-DO: use maxLength to determine when the game is over\nvar returnRandomPos=function returnRandomPos(){var xPos=Math.floor(Math.random()*gridResX);var yPos=Math.floor(Math.random()*gridResY);var overlap=bodyParts.some(function(part){return part[0]===xPos&&part[1]===yPos;});return overlap?returnRandomPos():[xPos,yPos];};var returnAvailablePos=function returnAvailablePos(){var gridObject={};var copyParts=_toConsumableArray(bodyParts);_toConsumableArray(Array(gridResX)).forEach(function(_,i){return gridObject[i]=_toConsumableArray(Array(gridResY).keys());});var _loop=function _loop(){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),key=_Object$entries$_i[0],value=_Object$entries$_i[1];var keyInt=parseInt(key);gridObject[key]=value.filter(function(elem){return!copyParts.some(function(part){return part[0]===keyInt&&part[1]===elem;});});if(gridObject[key].length<1)delete gridObject[key];};for(var _i=0,_Object$entries=Object.entries(gridObject);_i<_Object$entries.length;_i++){_loop();}var availableKeys=Object.keys(gridObject);var availableX=parseInt(availableKeys[Math.floor(Math.random()*availableKeys.length)]);var availableY=gridObject[availableX][Math.floor(Math.random()*gridObject[availableX].length)];return[availableX,availableY];};return snaccPos=bodyLength<maxLength/2?returnRandomPos():returnAvailablePos();};var drawSnacc=function drawSnacc(){p5.textSize(32);p5.text(\"\".concat(String.fromCodePoint(0x1F36C)),snaccPos[0]*squareSize+fieldOffsetX,(snaccPos[1]+0.9)*squareSize+fieldOffsetY);};var calcNewPos=function calcNewPos(){// Set lastDir and check for queued moves\nlastDir=curDir;if(preMove!==NIL){curDir=preMove;preMove=NIL;}isFirstMove=true;// Calculate new position of body based on direction\nif(lastDir===_UP){curLoc[1]--;}else if(lastDir===_DOWN){curLoc[1]++;}else if(lastDir===_LEFT){curLoc[0]--;}else if(lastDir===_RIGHT){curLoc[0]++;}// Boundary check\nif(curLoc[1]<0){curLoc[1]=gridResY-1;}else if(curLoc[1]>gridResY-1){curLoc[1]=0;}else if(curLoc[0]<0){curLoc[0]=gridResX-1;}else if(curLoc[0]>gridResX-1){curLoc[0]=0;}// Shift the snake body\nif(bodyParts.length>bodyLength){bodyParts.shift();}// Death üíÄ check\nbodyParts.forEach(function(part){if(curLoc[0]===part[0]&&curLoc[1]===part[1]){death=true;console.error(\"U DEAD \".concat(String.fromCodePoint(0x1F480)));}});// Set all bodyparts\nbodyParts.push([].concat(curLoc));// Snacc üç¨ check\nif(curLoc[0]===snaccPos[0]&&curLoc[1]===snaccPos[1]){bodyLength++;spawnSnacc();}};var drawPlayer=function drawPlayer(){var colorInterval=Math.floor(155/bodyLength);bodyParts.forEach(function(part,index){p5.fill(index*colorInterval+100,0,0);p5.rect(part[0]*squareSize+fieldOffsetX,part[1]*squareSize+fieldOffsetY,squareSize,squareSize);});};var setDirection=function setDirection(dir){if(curDir!==lastDir){preMove=dir;}if(Math.abs(dir-lastDir)!==2&&isFirstMove){curDir=dir;isFirstMove=false;}touchDir=dir;};var calcTouch=function calcTouch(){var distSquared=function distSquared(x1,y1,x2,y2){var dx=x2-x1;var dy=y2-y1;return dx*dx+dy*dy;};var radianDistance=Math.atan2(p5.mouseY-startTouchY,p5.mouseX-startTouchX);if(radianDistance<0)radianDistance=radianDistance+p5.TWO_PI;if(distSquared(startTouchX,startTouchY,p5.mouseX,p5.mouseY)>100){if(radianDistance>p5.TWO_PI-p5.QUARTER_PI||radianDistance<p5.QUARTER_PI){setDirection(_RIGHT);}else if(radianDistance>p5.QUARTER_PI&&radianDistance<p5.HALF_PI+p5.QUARTER_PI){setDirection(_DOWN);}else if(radianDistance>p5.HALF_PI+p5.QUARTER_PI&&radianDistance<p5.PI+p5.QUARTER_PI){setDirection(_LEFT);}else if(radianDistance>p5.PI+p5.QUARTER_PI&&radianDistance<p5.TWO_PI-p5.QUARTER_PI){setDirection(_UP);}}else{touchDir=NIL;}};var drawTouch=function drawTouch(){var bottomArc=function bottomArc(){return p5.arc(startTouchX,startTouchY,arcSize,arcSize,p5.QUARTER_PI,p5.HALF_PI+p5.QUARTER_PI);};var leftArc=function leftArc(){return p5.arc(startTouchX,startTouchY,arcSize,arcSize,p5.HALF_PI+p5.QUARTER_PI,p5.PI+p5.QUARTER_PI);};var topArc=function topArc(){return p5.arc(startTouchX,startTouchY,arcSize,arcSize,p5.PI+p5.QUARTER_PI,p5.TWO_PI-p5.QUARTER_PI);};var rightArc=function rightArc(){return p5.arc(startTouchX,startTouchY,arcSize,arcSize,p5.TWO_PI-p5.QUARTER_PI,p5.QUARTER_PI);};p5.fill(100);p5.ellipse(startTouchX,startTouchY,arcSize,arcSize);p5.fill(200);if(touchDir===_UP)topArc();if(touchDir===_DOWN)bottomArc();if(touchDir===_LEFT)leftArc();if(touchDir===_RIGHT)rightArc();// TO-DO: DRAW JOYSTICK THAT IS constrained BY BOUNDARIES OF CONTROL\np5.fill(50);p5.ellipse(p5.mouseX,p5.mouseY,arcSize/2,arcSize/2);};var handleTouchEnd=function handleTouchEnd(){touchControl=false;return false;};var handleTouchBegin=function handleTouchBegin(){startTouchX=p5.mouseX;startTouchY=p5.mouseY;touchControl=true;return false;};var handleKeys=function handleKeys(keyType,up,down,left,right){if(keyType===right){setDirection(_RIGHT);}if(keyType===down){setDirection(_DOWN);}if(keyType===left){setDirection(_LEFT);}if(keyType===up){setDirection(_UP);}};p5.mousePressed=function(){return handleTouchBegin();};p5.touchStarted=function(){return handleTouchBegin();};p5.mouseReleased=function(){return handleTouchEnd();};p5.touchEnded=function(){return handleTouchEnd();};p5.keyTyped=function(){handleKeys(p5.key,\"w\",\"s\",\"a\",\"d\");};p5.keyPressed=function(){handleKeys(p5.keyCode,p5.UP_ARROW,p5.DOWN_ARROW,p5.LEFT_ARROW,p5.RIGHT_ARROW);};p5.windowResized=function(){p5.resizeCanvas(p5.windowWidth,p5.windowHeight);p5.background(0,0,0,100);fieldOffsetX=p5.windowWidth/2-fieldWidth/2;fieldOffsetY=p5.windowHeight/2-fieldHeight/2;squareSize=fieldWidth/gridResX;};};var FunkySnake=function FunkySnake(){useEffect(function(){return cleanupFavicon();});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"Wassup \\uD83D\\uDC0D\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"viewport\",content:\"width=device-width, initial-scale=1\"}),/*#__PURE__*/_jsx(\"link\",{rel:\"icon\",href:\"data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>\\uD83D\\uDC0D</text></svg>\"})]}),/*#__PURE__*/_jsx(P5Wrapper,{sketch:sketch})]});};export default FunkySnake;","map":{"version":3,"sources":["/Users/floris.veldhuizen/Documents/GitHub/florisveldhuizen.github.io/src/pages/FunkySnake.jsx"],"names":["useEffect","ReactP5Wrapper","Helmet","cleanupFavicon","P5Wrapper","sketch","p5","fieldWidth","fieldHeight","gridResX","gameSpeed","snakeSize","NIL","_RIGHT","_DOWN","_LEFT","_UP","fieldOffsetX","fieldOffsetY","squareSize","gridResY","maxLength","lastDir","startTouchX","startTouchY","touchControl","touchDir","arcSize","isFirstMove","preMove","curDir","curLoc","bodyParts","bodyLength","death","iterationCounter","snaccPos","_frameRate","Math","floor","highScore","setup","frameRate","createCanvas","windowWidth","windowHeight","background","spawnSnacc","draw","calcTouch","calcNewPos","drawGrid","drawPlayer","drawSnacc","drawTouch","reset","drawScore","fill","rect","stroke","i","j","fontSize","curScore","textSize","textAlign","RIGHT","text","String","fromCodePoint","LEFT","returnRandomPos","xPos","random","yPos","overlap","some","part","returnAvailablePos","gridObject","copyParts","Array","forEach","_","keys","key","value","keyInt","parseInt","filter","elem","length","Object","entries","availableKeys","availableX","availableY","shift","console","error","push","colorInterval","index","setDirection","dir","abs","distSquared","x1","y1","x2","y2","dx","dy","radianDistance","atan2","mouseY","mouseX","TWO_PI","QUARTER_PI","HALF_PI","PI","bottomArc","arc","leftArc","topArc","rightArc","ellipse","handleTouchEnd","handleTouchBegin","handleKeys","keyType","up","down","left","right","mousePressed","touchStarted","mouseReleased","touchEnded","keyTyped","keyPressed","keyCode","UP_ARROW","DOWN_ARROW","LEFT_ARROW","RIGHT_ARROW","windowResized","resizeCanvas","FunkySnake"],"mappings":"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","sourcesContent":["import { useEffect } from \"react\";\nimport { ReactP5Wrapper } from \"react-p5-wrapper\";\nimport { Helmet } from \"react-helmet-async\";\nimport { cleanupFavicon, P5Wrapper } from \"./helper\";\n\nconst sketch = (p5) => {\n  /*\n  Made by: Floris Veldhuizen\n  Queuing of moves was adapted from: https://github.com/patorjk/JavaScript-Snake/blob/master/js/snake.js\n  */\n\n  // PARAMS\n  const fieldWidth = 400;\n  const fieldHeight = 400;\n  const gridResX = 14;          // How many squares fit in a row  (default: 14)\n  const gameSpeed = 13;         // Amount of frames per second    (default: 12)\n  const snakeSize = 5;\n\n  // GLOBAL VARIABLES\n  const NIL     = -1;\n  const _RIGHT  = 0;\n  const _DOWN   = 1;\n  const _LEFT   = 2;\n  const _UP     = 3;\n\n  // PRECALCULATED VALUES\n  let fieldOffsetX, fieldOffsetY, squareSize, gridResY, maxLength, lastDir;\n\n  // TOUCH CONTROLS\n  let startTouchX, startTouchY;\n  let touchControl = false;     // If true, the touch controls are displayed on screen\n  let touchDir = NIL;\n  const arcSize = 120;          // Diameter of the touch controls\n\n  let isFirstMove = true;\n  let preMove = NIL;\n  let curDir = _RIGHT;\n  let curLoc = [0,0];\n  let bodyParts = [];\n  let bodyLength = snakeSize - 1;\n  let death = false;\n  let iterationCounter = 0;\n  let snaccPos = [0,0];\n  let _frameRate = Math.floor(60 / gameSpeed); // Assuming 60 fps\n  let highScore = 0;\n\n  p5.setup = () => {\n    p5.frameRate(60);\n    p5.createCanvas(p5.windowWidth, p5.windowHeight);\n    p5.background(0,0,0,100);\n    fieldOffsetX = (p5.windowWidth/2)-(fieldWidth/2);\n    fieldOffsetY = (p5.windowHeight/2)-(fieldHeight/2);\n    squareSize = fieldWidth / gridResX;\n    gridResY = Math.floor(fieldHeight / squareSize);\n    maxLength = gridResX * gridResY;\n    spawnSnacc();\n  }\n\n  p5.draw = () => {\n    if (touchControl) calcTouch();\n    if (iterationCounter > _frameRate) {\n      p5.background(0,0,0,100);\n      calcNewPos();\n      drawGrid();\n      drawPlayer();\n      drawSnacc();\n      iterationCounter = 0;\n    }\n    if (touchControl) drawTouch();\n    if (death) reset();\n    iterationCounter++;\n    drawScore();\n  }\n\n  const reset = () => {\n    p5.fill(255);\n    p5.rect(0,0,p5.windowWidth,p5.windowHeight);\n    p5.background(0,0,0,100);\n    bodyLength = snakeSize - 1;\n    bodyParts = [];\n    death = false;\n  }\n\n  const drawGrid = () => {\n    p5.stroke(255)\n    p5.fill(0);\n    for (let i = 0; i < gridResX; i++) { // x-axis\n      for (let j = 0; j < gridResY; j++) { // y-axis\n        p5.rect(i * squareSize + fieldOffsetX, j * squareSize + fieldOffsetY, squareSize, squareSize);\n      }\n    }\n  }\n\n  const drawScore = () => {\n    const fontSize = 30;\n    const curScore = bodyLength - (snakeSize - 1);\n    if(curScore > highScore) highScore = curScore;\n    p5.textSize(fontSize);\n    p5.fill(255)\n    // Highscore\n    p5.textAlign(p5.RIGHT);\n    p5.text(`${String.fromCodePoint(0x1F3C6)}: ${highScore}`, fieldOffsetX + fieldWidth, fieldOffsetY - fontSize);\n    // Current score\n    p5.textAlign(p5.LEFT);\n    p5.text(`${String.fromCodePoint(0x1F36C)}: ${curScore}`, fieldOffsetX, fieldOffsetY - fontSize);\n  }\n\n  const spawnSnacc = () => {\n    // TO-DO: use maxLength to determine when the game is over\n    const returnRandomPos = () => {\n      const xPos = Math.floor(Math.random() * gridResX);\n      const yPos = Math.floor(Math.random() * gridResY);\n      const overlap = bodyParts.some(part => (part[0] === xPos && part[1] === yPos));\n      return overlap ? returnRandomPos() : [xPos, yPos];\n    }\n\n    const returnAvailablePos = () => {\n      const gridObject = {};\n      const copyParts = [...bodyParts];\n      [...Array(gridResX)].forEach((_,i) => gridObject[i] = [...Array(gridResY).keys()]);\n      for (const [key, value] of Object.entries(gridObject)) {\n        const keyInt = parseInt(key);\n        gridObject[key] = value.filter(elem =>\n          !copyParts.some(part => part[0] === keyInt && part[1] === elem)\n        )\n        if (gridObject[key].length < 1) delete gridObject[key];\n      }\n      const availableKeys = Object.keys(gridObject);\n      const availableX = parseInt(availableKeys[Math.floor(Math.random() * availableKeys.length)]);\n      const availableY = gridObject[availableX][Math.floor(Math.random() * gridObject[availableX].length)];\n      return [availableX, availableY];\n    }\n\n  return snaccPos = bodyLength < maxLength / 2 ? returnRandomPos() : returnAvailablePos();\n  }\n\n  const drawSnacc = () => {\n    p5.textSize(32);\n    p5.text(`${String.fromCodePoint(0x1F36C)}`, snaccPos[0] * squareSize + fieldOffsetX, (snaccPos[1] + 0.9) * squareSize + fieldOffsetY);\n  }\n\n  const calcNewPos = () => {\n    // Set lastDir and check for queued moves\n    lastDir = curDir;\n    if (preMove !== NIL) {\n      curDir = preMove;\n      preMove = NIL;\n    }\n    isFirstMove = true;\n\n    // Calculate new position of body based on direction\n    if      (lastDir === _UP)    { curLoc[1]-- }\n    else if (lastDir === _DOWN)  { curLoc[1]++ }\n    else if (lastDir === _LEFT)  { curLoc[0]-- }\n    else if (lastDir === _RIGHT) { curLoc[0]++ }\n\n    // Boundary check\n    if      (curLoc[1] < 0) { curLoc[1] = gridResY - 1 }\n    else if (curLoc[1] > gridResY - 1) { curLoc[1] = 0 }\n    else if (curLoc[0] < 0) { curLoc[0] = gridResX - 1 }\n    else if (curLoc[0] > gridResX - 1) { curLoc[0] = 0 }\n\n    // Shift the snake body\n    if (bodyParts.length > bodyLength) { bodyParts.shift(); }\n\n    // Death üíÄ check\n    bodyParts.forEach(part => {\n      if (curLoc[0] === part[0] && curLoc[1] === part[1]) {\n      death = true;\n      console.error(`U DEAD ${String.fromCodePoint(0x1F480)}`);\n      }\n    });\n\n    // Set all bodyparts\n    bodyParts.push([...curLoc]);\n\n    // Snacc üç¨ check\n    if (curLoc[0] === snaccPos[0] && curLoc[1] === snaccPos[1]) {\n      bodyLength++;\n      spawnSnacc();\n    }\n  }\n\n  const drawPlayer = () => {\n    const colorInterval = Math.floor(155 / bodyLength);\n    bodyParts.forEach((part,index) => {\n      p5.fill(index * colorInterval + 100,0,0);\n      p5.rect(part[0] * squareSize + fieldOffsetX, part[1] * squareSize + fieldOffsetY, squareSize, squareSize);\n    });\n  }\n\n  const setDirection = dir => {\n    if (curDir !== lastDir) { preMove = dir }\n    if (Math.abs(dir - lastDir) !== 2 && isFirstMove) {\n      curDir = dir;\n      isFirstMove = false;\n    }\n    touchDir = dir;\n  }\n\n  const calcTouch = () => {\n    const distSquared = (x1, y1, x2, y2) => {\n      let dx = x2 - x1;\n      let dy = y2 - y1;\n      return dx * dx + dy * dy;\n    }\n    let radianDistance = Math.atan2(p5.mouseY-startTouchY, p5.mouseX-startTouchX);\n    if (radianDistance < 0) radianDistance = radianDistance + p5.TWO_PI;\n    if(distSquared(startTouchX, startTouchY, p5.mouseX, p5.mouseY) > 100) {\n      if      (radianDistance > p5.TWO_PI - p5.QUARTER_PI || radianDistance < p5.QUARTER_PI)          { setDirection(_RIGHT)}\n      else if (radianDistance > p5.QUARTER_PI && radianDistance < p5.HALF_PI + p5.QUARTER_PI)         { setDirection(_DOWN) }\n      else if (radianDistance > p5.HALF_PI + p5.QUARTER_PI && radianDistance < p5.PI + p5.QUARTER_PI) { setDirection(_LEFT) }\n      else if (radianDistance > p5.PI + p5.QUARTER_PI && radianDistance < p5.TWO_PI - p5.QUARTER_PI)  { setDirection(_UP)   }\n    } else {\n      touchDir = NIL;\n    }\n  }\n\n  const drawTouch = () => {\n    const bottomArc = () => p5.arc(startTouchX, startTouchY, arcSize, arcSize, p5.QUARTER_PI, p5.HALF_PI + p5.QUARTER_PI);\n    const leftArc   = () => p5.arc(startTouchX, startTouchY, arcSize, arcSize, p5.HALF_PI + p5.QUARTER_PI, p5.PI + p5.QUARTER_PI);\n    const topArc    = () => p5.arc(startTouchX, startTouchY, arcSize, arcSize, p5.PI + p5.QUARTER_PI, p5.TWO_PI - p5.QUARTER_PI);\n    const rightArc  = () => p5.arc(startTouchX, startTouchY, arcSize, arcSize, p5.TWO_PI - p5.QUARTER_PI, p5.QUARTER_PI);\n\n    p5.fill(100);\n    p5.ellipse(startTouchX, startTouchY, arcSize, arcSize);\n    p5.fill(200);\n    if (touchDir === _UP)    topArc();\n    if (touchDir === _DOWN)  bottomArc();\n    if (touchDir === _LEFT)  leftArc();\n    if (touchDir === _RIGHT) rightArc();\n\n    // TO-DO: DRAW JOYSTICK THAT IS constrained BY BOUNDARIES OF CONTROL\n    p5.fill(50);\n    p5.ellipse(p5.mouseX, p5.mouseY, arcSize/2, arcSize/2);\n  }\n\n  const handleTouchEnd = () => {\n    touchControl = false;\n    return false;\n  }\n\n  const handleTouchBegin = () => {\n    startTouchX = p5.mouseX;\n    startTouchY = p5.mouseY;\n    touchControl = true;\n    return false;\n  }\n\n  const handleKeys = (keyType, up, down, left, right) => {\n    if (keyType === right) { setDirection(_RIGHT)}\n    if (keyType === down)  { setDirection(_DOWN) }\n    if (keyType === left)  { setDirection(_LEFT) }\n    if (keyType === up)    { setDirection(_UP)   }\n  }\n\n  p5.mousePressed = () => {\n    return handleTouchBegin();\n  }\n\n  p5.touchStarted = () => {\n    return handleTouchBegin();\n  }\n\n  p5.mouseReleased = () => {\n    return handleTouchEnd();\n  }\n\n  p5.touchEnded = () => {\n    return handleTouchEnd();\n  }\n\n  p5.keyTyped = () => {\n    handleKeys(p5.key, \"w\", \"s\", \"a\", \"d\");\n  }\n\n  p5.keyPressed = () => {\n    handleKeys(p5.keyCode, p5.UP_ARROW, p5.DOWN_ARROW, p5.LEFT_ARROW, p5.RIGHT_ARROW);\n  }\n\n  p5.windowResized = () => {\n    p5.resizeCanvas(p5.windowWidth, p5.windowHeight);\n    p5.background(0,0,0,100);\n    fieldOffsetX = (p5.windowWidth/2)-(fieldWidth/2);\n    fieldOffsetY = (p5.windowHeight/2)-(fieldHeight/2);\n    squareSize = fieldWidth / gridResX;\n  }\n}\n\nconst FunkySnake = () => {\n  useEffect(() => (cleanupFavicon()));\n  return (\n    <>\n      <Helmet>\n        <title>Wassup &#x1F40D;</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <link rel=\"icon\" href=\"data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêç</text></svg>\" />\n      </Helmet>\n      <P5Wrapper sketch={sketch} />\n    </>\n  );\n};\n\nexport default FunkySnake;\n"]},"metadata":{},"sourceType":"module"}