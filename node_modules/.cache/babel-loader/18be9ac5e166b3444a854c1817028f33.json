{"ast":null,"code":"var _jsxFileName = \"/Users/floris.veldhuizen/Documents/GitHub/florisveldhuizen.github.io/src/pages/utils/P5_Wrapper.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport p5 from 'p5';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class P5Wrapper extends React.Component {\n  componentDidMount() {\n    this.canvas = new p5(this.props.sketch, this.wrapper);\n\n    if (this.canvas.myCustomRedrawAccordingToNewPropsHandler) {\n      this.canvas.myCustomRedrawAccordingToNewPropsHandler(this.props);\n    }\n  }\n\n  componentWillReceiveProps(newprops) {\n    if (this.props.sketch !== newprops.sketch) {\n      this.canvas.remove();\n      this.canvas = new p5(newprops.sketch, this.wrapper);\n    }\n\n    if (this.canvas.myCustomRedrawAccordingToNewPropsHandler) {\n      this.canvas.myCustomRedrawAccordingToNewPropsHandler(newprops);\n    }\n  }\n\n  componentWillUnmount() {\n    this.canvas.remove();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: wrapper => this.wrapper = wrapper\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nconst P5FunctionWrapper = ({\n  sketch,\n  children,\n  ...props\n}) => {\n  _s();\n\n  const wrapper = useRef();\n  const [instance, setInstance] = useState(null);\n  useEffect(() => {\n    if (wrapper.current === null) return;\n    instance === null || instance === void 0 ? void 0 : instance.remove();\n    const canvas = new p5(sketch, wrapper);\n    setInstance(canvas);\n    return instance === null || instance === void 0 ? void 0 : instance.remove;\n  }, [sketch, wrapper.current]);\n  useEffect(() => {\n    var _instance$updateWithP;\n\n    instance === null || instance === void 0 ? void 0 : (_instance$updateWithP = instance.updateWithProps) === null || _instance$updateWithP === void 0 ? void 0 : _instance$updateWithP.call(instance, props);\n  }, [props]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: wrapper,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n\n_s(P5FunctionWrapper, \"cXDqBo6DxnzzlT8xSDYftwVe+/g=\");\n\n_c = P5FunctionWrapper;\n\nvar _c;\n\n$RefreshReg$(_c, \"P5FunctionWrapper\");","map":{"version":3,"sources":["/Users/floris.veldhuizen/Documents/GitHub/florisveldhuizen.github.io/src/pages/utils/P5_Wrapper.jsx"],"names":["React","useRef","useEffect","useState","p5","P5Wrapper","Component","componentDidMount","canvas","props","sketch","wrapper","myCustomRedrawAccordingToNewPropsHandler","componentWillReceiveProps","newprops","remove","componentWillUnmount","render","P5FunctionWrapper","children","instance","setInstance","current","updateWithProps"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,OAAOC,EAAP,MAAe,IAAf;;AAEA,eAAe,MAAMC,SAAN,SAAwBL,KAAK,CAACM,SAA9B,CAAwC;AACrDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKC,MAAL,GAAc,IAAIJ,EAAJ,CAAO,KAAKK,KAAL,CAAWC,MAAlB,EAA0B,KAAKC,OAA/B,CAAd;;AACA,QAAI,KAAKH,MAAL,CAAYI,wCAAhB,EAA2D;AACzD,WAAKJ,MAAL,CAAYI,wCAAZ,CAAqD,KAAKH,KAA1D;AACD;AACF;;AAEDI,EAAAA,yBAAyB,CAACC,QAAD,EAAW;AAClC,QAAG,KAAKL,KAAL,CAAWC,MAAX,KAAsBI,QAAQ,CAACJ,MAAlC,EAAyC;AACvC,WAAKF,MAAL,CAAYO,MAAZ;AACA,WAAKP,MAAL,GAAc,IAAIJ,EAAJ,CAAOU,QAAQ,CAACJ,MAAhB,EAAwB,KAAKC,OAA7B,CAAd;AACD;;AACD,QAAI,KAAKH,MAAL,CAAYI,wCAAhB,EAA2D;AACzD,WAAKJ,MAAL,CAAYI,wCAAZ,CAAqDE,QAArD;AACD;AACF;;AAEDE,EAAAA,oBAAoB,GAAG;AACrB,SAAKR,MAAL,CAAYO,MAAZ;AACD;;AAEDE,EAAAA,MAAM,GAAG;AACP,wBAAO;AAAK,MAAA,GAAG,EAAEN,OAAO,IAAI,KAAKA,OAAL,GAAeA;AAApC;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AAxBoD;;AA2BvD,MAAMO,iBAAiB,GAAG,CAAC;AAACR,EAAAA,MAAD;AAASS,EAAAA,QAAT;AAAmB,KAAGV;AAAtB,CAAD,KAAkC;AAAA;;AAC1D,QAAME,OAAO,GAAGV,MAAM,EAAtB;AACA,QAAM,CAACmB,QAAD,EAAWC,WAAX,IAA0BlB,QAAQ,CAAC,IAAD,CAAxC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIS,OAAO,CAACW,OAAR,KAAoB,IAAxB,EAA8B;AAC9BF,IAAAA,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEL,MAAV;AACA,UAAMP,MAAM,GAAG,IAAIJ,EAAJ,CAAOM,MAAP,EAAeC,OAAf,CAAf;AACAU,IAAAA,WAAW,CAACb,MAAD,CAAX;AACA,WAAOY,QAAP,aAAOA,QAAP,uBAAOA,QAAQ,CAAEL,MAAjB;AACD,GANQ,EAMN,CAACL,MAAD,EAASC,OAAO,CAACW,OAAjB,CANM,CAAT;AAQApB,EAAAA,SAAS,CAAC,MAAM;AAAA;;AACdkB,IAAAA,QAAQ,SAAR,IAAAA,QAAQ,WAAR,qCAAAA,QAAQ,CAAEG,eAAV,qFAAAH,QAAQ,EAAoBX,KAApB,CAAR;AACD,GAFQ,EAEN,CAACA,KAAD,CAFM,CAAT;AAIA,sBACE;AAAK,IAAA,GAAG,EAAEE,OAAV;AAAA,cAAoBQ;AAApB;AAAA;AAAA;AAAA;AAAA,UADF;AAGD,CAnBD;;GAAMD,iB;;KAAAA,iB","sourcesContent":["import React, { useRef, useEffect, useState } from 'react'\nimport p5 from 'p5'\n\nexport default class P5Wrapper extends React.Component {\n  componentDidMount() {\n    this.canvas = new p5(this.props.sketch, this.wrapper)\n    if( this.canvas.myCustomRedrawAccordingToNewPropsHandler ) {\n      this.canvas.myCustomRedrawAccordingToNewPropsHandler(this.props)\n    }\n  }\n\n  componentWillReceiveProps(newprops) {\n    if(this.props.sketch !== newprops.sketch){\n      this.canvas.remove()\n      this.canvas = new p5(newprops.sketch, this.wrapper)\n    }\n    if( this.canvas.myCustomRedrawAccordingToNewPropsHandler ) {\n      this.canvas.myCustomRedrawAccordingToNewPropsHandler(newprops)\n    }\n  }\n\n  componentWillUnmount() {\n    this.canvas.remove()\n  }\n\n  render() {\n    return <div ref={wrapper => this.wrapper = wrapper}></div>\n  }\n}\n\nconst P5FunctionWrapper = ({sketch, children, ...props}) => {\n  const wrapper = useRef();\n  const [instance, setInstance] = useState(null);\n\n  useEffect(() => {\n    if (wrapper.current === null) return;\n    instance?.remove();\n    const canvas = new p5(sketch, wrapper);\n    setInstance(canvas);\n    return instance?.remove;\n  }, [sketch, wrapper.current]);\n\n  useEffect(() => {\n    instance?.updateWithProps?.(props);\n  }, [props]);\n\n  return (\n    <div ref={wrapper}>{children}</div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}