{"ast":null,"code":"var _jsxFileName = \"/Users/floris.veldhuizen/Documents/GitHub/florisveldhuizen.github.io/src/pages/Walking.jsx\";\n// import P5Wrapper from \"./utils/P5_Wrapper\";\nimport { ReactP5Wrapper } from \"react-p5-wrapper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst sketch = p5 => {\n  /*\n  Made by: Floris Veldhuizen\n  */\n  function vectorLerp_old(x, y, z, amt) {\n    // if (x instanceof p5.Vector) {\n    //   return this.lerp(x.x, x.y, x.z, y);\n    // }\n    const vec = p5.createVector();\n    vec.x += (x - vec.x) * amt || 0;\n    vec.y += (y - vec.y) * amt || 0;\n    vec.z += (z - vec.z) * amt || 0;\n    console.log(vec);\n    return vec;\n  }\n\n  ;\n\n  function vectorLerp(v1, v2, amt, target) {\n    if (!target) {\n      target = v1.copy();\n\n      if (arguments.length === 4) {\n        p5._friendlyError('The target parameter is undefined, it should be of type p5.Vector', 'p5.Vector.lerp');\n      }\n    } else {\n      target.set(v1);\n    }\n\n    target.lerp(v2, amt);\n    return target;\n  }\n\n  ;\n  let charpos,\n      goalpos,\n      leftpos,\n      rightpos,\n      leftfoot,\n      rightfoot,\n      speedvector,\n      movevector,\n      lastAngle = 0,\n      charAngle = 0;\n  let gpbool = false,\n      mcbool = false,\n      stepbool = false,\n      stepboolcounter = 0; //player variables\n\n  let charspeed = 1,\n      maxspeed = 4,\n      stepspeed = 25,\n      drag = 0.9; // controller values\n\n  let upPressed = 0,\n      downPressed = 0,\n      leftPressed = 0,\n      rightPressed = 0;\n\n  p5.setup = () => {\n    p5.createCanvas(p5.windowWidth, p5.windowHeight);\n    movevector = p5.createVector(0, 0);\n    speedvector = p5.createVector(0, 0);\n    goalpos = p5.createVector(0, 0);\n    charpos = p5.createVector(p5.windowWidth / 2, p5.windowHeight / 2);\n    leftpos = p5.createVector(charpos.x - 20, charpos.y);\n    rightpos = p5.createVector(charpos.x + 20, charpos.y);\n    leftfoot = p5.createVector(charpos.x - 20, charpos.y);\n    rightfoot = p5.createVector(charpos.x + 20, charpos.y);\n  };\n\n  p5.draw = () => {\n    p5.background(255, 255, 255, 255);\n\n    if (mcbool) {\n      p5.ellipse(p5.mouseX, p5.mouseY, 40, 40);\n      vectorControl();\n    } else if (gpbool) {\n      p5.ellipse(goalpos.x, goalpos.y, 40, 40);\n      vectorControl(goalpos.x, goalpos.y);\n    }\n\n    speedqualizervector();\n    legReworked();\n    lastAngle = charAngle;\n\n    if (stepboolcounter > stepspeed) {\n      stepboolcounter = 0;\n      stepbool = !stepbool;\n    }\n\n    stepboolcounter++;\n  };\n\n  function legReworked() {\n    let curAngle = charAngle - lastAngle;\n    rightpos.add(speedvector);\n    leftpos.add(speedvector);\n    leftpos = pointRotate(leftpos, charpos, curAngle);\n    rightpos = pointRotate(rightpos, charpos, curAngle);\n\n    if (!stepbool) {\n      leftfoot = vectorLerp(leftfoot, leftpos, 0.1);\n    } else if (stepbool) {\n      rightfoot = vectorLerp(rightfoot, rightpos, 0.1);\n    } // draw them leggos\n\n\n    p5.ellipse(leftfoot.x, leftfoot.y, 10, 10);\n    p5.ellipse(rightfoot.x, rightfoot.y, 10, 10);\n  }\n\n  function speedqualizervector() {\n    speedvector.add(movevector.mult(charspeed));\n    speedvector.limit(maxspeed);\n    const speedvmagSq = speedvector.magSq(); //if the player is not moving, the character should stop\n\n    if (speedvmagSq > 0) {\n      if (speedvmagSq.toFixed(2) > 0) {\n        if (movevector.x === 0) speedvector.x *= drag;\n        if (movevector.y === 0) speedvector.y *= drag;\n        charAngle = speedvector.heading() + p5.HALF_PI;\n      } else {\n        speedvector.mult(0);\n        charAngle = lastAngle;\n      }\n    }\n\n    charpos.add(speedvector);\n  }\n\n  function setMovevector() {\n    gpbool = false;\n    movevector.mult(0);\n    movevector.y += -1 * upPressed;\n    movevector.y += 1 * downPressed;\n    movevector.x += -1 * leftPressed;\n    movevector.x += 1 * rightPressed;\n    movevector.normalize();\n  }\n\n  function vectorControl(x = p5.mouseX, y = p5.mouseY) {\n    let vectorangle = p5.createVector(0, 0);\n    vectorangle.x = x - charpos.x;\n    vectorangle.y = y - charpos.y;\n\n    if (vectorangle.magSq() > 15) {\n      movevector = vectorangle.normalize();\n    } else {\n      speedvector.mult(drag ** 2);\n      movevector.mult(0);\n      gpbool = false;\n    }\n  }\n  /*\n  KEY SHIT\n  */\n\n\n  p5.keyPressed = () => {\n    if (p5.keyCode === p5.LEFT_ARROW) {\n      leftPressed = 1;\n    }\n\n    if (p5.keyCode === p5.RIGHT_ARROW) {\n      rightPressed = 1;\n    }\n\n    if (p5.keyCode === p5.UP_ARROW) {\n      upPressed = 1;\n    }\n\n    if (p5.keyCode === p5.DOWN_ARROW) {\n      downPressed = 1;\n    }\n\n    setMovevector();\n  };\n\n  p5.keyReleased = () => {\n    if (p5.keyCode === p5.LEFT_ARROW) {\n      leftPressed = 0;\n    }\n\n    if (p5.keyCode === p5.RIGHT_ARROW) {\n      rightPressed = 0;\n    }\n\n    if (p5.keyCode === p5.UP_ARROW) {\n      upPressed = 0;\n    }\n\n    if (p5.keyCode === p5.DOWN_ARROW) {\n      downPressed = 0;\n    }\n\n    setMovevector();\n  };\n\n  p5.mousePressed = () => {\n    mcbool = true;\n    gpbool = false;\n  };\n\n  p5.mouseReleased = () => {\n    mcbool = false;\n    gpbool = true;\n    goalpos.x = p5.mouseX;\n    goalpos.y = p5.mouseY;\n    movevector.x = 0;\n    movevector.y = 0;\n  };\n\n  p5.windowResized = () => {\n    p5.resizeCanvas(p5.windowWidth, p5.windowHeight);\n  };\n  /**\n  * For lack of better rotation in p5.js\n  * @param {vector} p5.Vector  \tThis is the vector (coord) that you want to rotate\n  * @param {pivot}  p5.Vector  \tThis is the vector (coord) you want to pivot around\n  * @param {angle}\tnumber  \t\tThis is the angle of the rotation in radians\n  */\n\n\n  function pointRotate(vector, pivot, angle) {\n    const s = p5.sin(angle);\n    const c = p5.cos(angle); // translate point back to origin:\n\n    vector.sub(pivot); // rotate point\n\n    let xnew = vector.x * c - vector.y * s;\n    let ynew = vector.x * s + vector.y * c; // translate point back:\n\n    vector.x = xnew + pivot.x;\n    vector.y = ynew + pivot.y;\n    return vector;\n  }\n};\n\nconst Walking = () => {\n  return /*#__PURE__*/_jsxDEV(ReactP5Wrapper, {\n    sketch: sketch\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Walking;\nexport default Walking;\n\nvar _c;\n\n$RefreshReg$(_c, \"Walking\");","map":{"version":3,"sources":["/Users/floris.veldhuizen/Documents/GitHub/florisveldhuizen.github.io/src/pages/Walking.jsx"],"names":["ReactP5Wrapper","sketch","p5","vectorLerp_old","x","y","z","amt","vec","createVector","console","log","vectorLerp","v1","v2","target","copy","arguments","length","_friendlyError","set","lerp","charpos","goalpos","leftpos","rightpos","leftfoot","rightfoot","speedvector","movevector","lastAngle","charAngle","gpbool","mcbool","stepbool","stepboolcounter","charspeed","maxspeed","stepspeed","drag","upPressed","downPressed","leftPressed","rightPressed","setup","createCanvas","windowWidth","windowHeight","draw","background","ellipse","mouseX","mouseY","vectorControl","speedqualizervector","legReworked","curAngle","add","pointRotate","mult","limit","speedvmagSq","magSq","toFixed","heading","HALF_PI","setMovevector","normalize","vectorangle","keyPressed","keyCode","LEFT_ARROW","RIGHT_ARROW","UP_ARROW","DOWN_ARROW","keyReleased","mousePressed","mouseReleased","windowResized","resizeCanvas","vector","pivot","angle","s","sin","c","cos","sub","xnew","ynew","Walking"],"mappings":"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","sourcesContent":["// import P5Wrapper from \"./utils/P5_Wrapper\";\n\nimport { ReactP5Wrapper } from \"react-p5-wrapper\";\n\nconst sketch = (p5) => {\n  /*\n  Made by: Floris Veldhuizen\n  */\n\n  function vectorLerp_old(x, y, z, amt) {\n    // if (x instanceof p5.Vector) {\n    //   return this.lerp(x.x, x.y, x.z, y);\n    // }\n    const vec = p5.createVector()\n    vec.x += (x - vec.x) * amt || 0;\n    vec.y += (y - vec.y) * amt || 0;\n    vec.z += (z - vec.z) * amt || 0;\n    console.log(vec);\n    return vec;\n  };\n\n  function vectorLerp(v1, v2, amt, target) {\n    if (!target) {\n      target = v1.copy();\n      if (arguments.length === 4) {\n        p5._friendlyError(\n          'The target parameter is undefined, it should be of type p5.Vector',\n          'p5.Vector.lerp'\n        );\n      }\n    } else {\n      target.set(v1);\n    }\n    target.lerp(v2, amt);\n    return target;\n  };\n\n  let charpos, goalpos, leftpos, rightpos, leftfoot, rightfoot, speedvector, movevector, lastAngle = 0, charAngle = 0;\n  let gpbool = false, mcbool = false, stepbool = false, stepboolcounter = 0;\n\n  //player variables\n  let charspeed = 1,\n      maxspeed = 4,\n      stepspeed = 25,\n      drag = 0.9;\n\n  // controller values\n  let upPressed = 0, downPressed = 0, leftPressed = 0, rightPressed = 0;\n\n  p5.setup = () => {\n    p5.createCanvas(p5.windowWidth, p5.windowHeight);\n    movevector = p5.createVector(0,0);\n    speedvector = p5.createVector(0,0);\n    goalpos = p5.createVector(0,0);\n    charpos = p5.createVector( p5.windowWidth/2, p5.windowHeight/2);\n    leftpos = p5.createVector(charpos.x-20,charpos.y);\n    rightpos = p5.createVector(charpos.x+20,charpos.y);\n    leftfoot = p5.createVector(charpos.x-20,charpos.y);\n    rightfoot = p5.createVector(charpos.x+20,charpos.y);\n  }\n\n  p5.draw = () => {\n    p5.background(255,255,255,255);\n    if (mcbool) {\n      p5.ellipse(p5.mouseX, p5.mouseY, 40, 40);\n      vectorControl();\n    } else if (gpbool) {\n      p5.ellipse(goalpos.x, goalpos.y, 40, 40);\n      vectorControl(goalpos.x,goalpos.y);\n    }\n    speedqualizervector();\n    legReworked();\n    lastAngle = charAngle;\n    if(stepboolcounter > stepspeed){\n      stepboolcounter = 0;\n      stepbool = !stepbool;\n    }\n    stepboolcounter++;\n  }\n\n  function legReworked(){\n      let curAngle = charAngle - lastAngle;\n      rightpos.add(speedvector);\n      leftpos.add(speedvector);\n      leftpos = pointRotate(leftpos,charpos,curAngle);\n      rightpos = pointRotate(rightpos,charpos,curAngle);\n\n      if(!stepbool){\n        leftfoot = vectorLerp(leftfoot,leftpos,0.1);\n      } else if (stepbool) {\n        rightfoot = vectorLerp(rightfoot,rightpos,0.1);\n      }\n\n      // draw them leggos\n      p5.ellipse(leftfoot.x, leftfoot.y, 10, 10);\n      p5.ellipse(rightfoot.x, rightfoot.y, 10, 10);\n  }\n\n  function speedqualizervector(){\n    speedvector.add(movevector.mult(charspeed));\n    speedvector.limit(maxspeed);\n    const speedvmagSq = speedvector.magSq();\n    //if the player is not moving, the character should stop\n    if (speedvmagSq > 0) {\n      if(speedvmagSq.toFixed(2) > 0){\n        if(movevector.x===0) speedvector.x *= drag;\n        if(movevector.y===0) speedvector.y *= drag;\n        charAngle = speedvector.heading() + p5.HALF_PI;\n      } else {\n        speedvector.mult(0);\n        charAngle = lastAngle;\n      }\n    }\n    charpos.add(speedvector);\n  }\n\n  function setMovevector(){\n    gpbool = false;\n    movevector.mult(0);\n    movevector.y += -1 * upPressed;\n    movevector.y += 1 * downPressed;\n    movevector.x += -1 * leftPressed;\n    movevector.x += 1 * rightPressed;\n    movevector.normalize();\n  }\n\n  function vectorControl(x = p5.mouseX,y = p5.mouseY){\n    let vectorangle = p5.createVector(0,0);\n    vectorangle.x = (x - charpos.x);\n    vectorangle.y = (y - charpos.y);\n    if(vectorangle.magSq() > 15){\n      movevector = vectorangle.normalize();\n    } else {\n      speedvector.mult(drag**2);\n      movevector.mult(0);\n      gpbool = false;\n    }\n  }\n\n  /*\n  KEY SHIT\n  */\n  p5.keyPressed = () => {\n    if (p5.keyCode === p5.LEFT_ARROW) {\n      leftPressed = 1;\n    }\n    if (p5.keyCode === p5.RIGHT_ARROW) {\n      rightPressed = 1;\n    }\n    if (p5.keyCode === p5.UP_ARROW) {\n      upPressed = 1;\n    }\n    if (p5.keyCode === p5.DOWN_ARROW) {\n      downPressed = 1;\n    }\n    setMovevector();\n  }\n\n  p5.keyReleased = () => {\n    if (p5.keyCode === p5.LEFT_ARROW) {\n      leftPressed = 0;\n    }\n    if (p5.keyCode === p5.RIGHT_ARROW) {\n      rightPressed = 0;\n    }\n    if (p5.keyCode === p5.UP_ARROW) {\n      upPressed = 0;\n    }\n    if (p5.keyCode === p5.DOWN_ARROW) {\n      downPressed = 0;\n    }\n    setMovevector();\n  }\n  p5.mousePressed = () => {\n    mcbool = true;\n    gpbool = false;\n  }\n  p5.mouseReleased = () => {\n    mcbool = false;\n    gpbool = true;\n    goalpos.x = p5.mouseX;\n    goalpos.y = p5.mouseY;\n    movevector.x = 0;\n    movevector.y = 0;\n  }\n  p5.windowResized = () => {\n    p5.resizeCanvas(p5.windowWidth, p5.windowHeight);\n  }\n\n  /**\n  * For lack of better rotation in p5.js\n  * @param {vector} p5.Vector  \tThis is the vector (coord) that you want to rotate\n  * @param {pivot}  p5.Vector  \tThis is the vector (coord) you want to pivot around\n  * @param {angle}\tnumber  \t\tThis is the angle of the rotation in radians\n  */\n  function pointRotate(vector,pivot,angle){\n    const s = p5.sin(angle);\n    const c = p5.cos(angle);\n    // translate point back to origin:\n    vector.sub(pivot);\n    // rotate point\n    let xnew = vector.x * c - vector.y * s;\n    let ynew = vector.x * s + vector.y * c;\n    // translate point back:\n    vector.x = xnew + pivot.x;\n    vector.y = ynew + pivot.y;\n    return vector;\n  }\n}\n\nconst Walking = () => {\n  return (\n    <ReactP5Wrapper sketch={sketch} />\n  );\n};\n\nexport default Walking;\n"]},"metadata":{},"sourceType":"module"}